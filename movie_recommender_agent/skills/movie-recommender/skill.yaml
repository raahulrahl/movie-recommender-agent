id: movie-recommender-v1
name: movie-recommender
version: 1.0.0
author: paras@getbindu.com

# Description
description: |
  AI-powered movie recommendation agent that provides personalized film suggestions
  using Exa search for real-time movie data, ratings, and reviews. Delivers structured
  markdown recommendations with detailed movie information.

# Tags and Modes
tags:
  - movie-recommendation
  - entertainment
  - film-curation
  - personalized-suggestions

input_modes:
  - text/plain
  - application/json

output_modes:
  - text/plain
  - application/json
  - text/markdown

# Example Queries
examples:
  - "Suggest Recent Movies movies similar to Inception"
  - "Recommend family-friendly adventure films with high ratings for a family outing. Include the movie title, release year, and a brief plot summary."
  - "Top-rated comedy movies from last 2 years"
  - "Korean movies similar to Parasite and Oldboy"

# Detailed Capabilities
capabilities_detail:
  primary_capability:
    supported: true
    description: "Personalized movie recommendations using Exa search and OpenRouter LLM"
    features:
      - "Real-time movie information via ExaTools API"
      - "IMDB and Rotten Tomatoes rating lookup"
      - "Genre-based and similarity matching"
      - "Structured markdown output with tables and emojis"
      - "Movie metadata: title, year, rating, genre, runtime, director, cast, synopsis"
      - "Streaming platform availability (when available)"
      - "Upcoming releases and bonus recommendations"
    limitations: "Requires Exa API and OpenRouter API; no direct streaming links; depends on external data availability"

  secondary_capability:
    supported: true
    description: "Optional conversation memory using Mem0Tools"
    features:
      - "Conversation context retention across sessions"
      - "User preference learning"
    limitations: "Requires MEM0_API_KEY environment variable; optional feature"

# Requirements
requirements:
  packages:
    - "agno"
    - "bindu"
    - "python-dotenv"
  system:
    - "Python 3.12+"
  min_memory_mb: 256

# Performance Metrics
performance:
  avg_processing_time_ms: 10000
  max_concurrent_requests: 5
  memory_per_request_mb: 256
  scalability: horizontal

# Tool Restrictions
allowed_tools:
  - ExaTools
  - Mem0Tools

# Rich Documentation
documentation:
  overview: |
    PopcornPal is an AI-powered movie recommendation agent built with Agno framework.
    Uses ExaTools for real-time movie data access and OpenRouter (default: openai/gpt-4o) for LLM.
    Optional Mem0Tools integration for conversation memory. Returns structured markdown with tables,
    emojis, and detailed movie metadata including ratings, cast, synopsis, and viewing tips.

  use_cases:
    when_to_use:
      - "Movie discovery based on preferences or similar titles"
      - "Genre-specific recommendations with rating filters"
      - "Mood-based or occasion-based suggestions (date night, family outing)"
      - "International cinema exploration"
      - "Upcoming releases and trending movies"

    when_not_to_use:
      - "Streaming links or illegal content access"
      - "Movie production or filmmaking advice"
      - "TV shows or series recommendations (movie-focused only)"
      - "Real-time ticket booking or theater information"

  input_structure: |
    JSON-RPC 2.0 message with user query in parts array.

    Example:
    {
      "jsonrpc": "2.0",
      "method": "message/send",
      "params": {
        "message": {
          "role": "user",
          "parts": [
            {
              "kind": "text",
              "text": "Suggest Recent Movies movies similar to Inception"
            }
          ],
          "kind": "message",
          "messageId": "550e8400-e29b-41d4-a716-446655440038",
          "contextId": "550e8400-e29b-41d4-a716-446655440038",
          "taskId": "550e8400-e29b-41d4-a716-446655440078"
        },
        "configuration": {
          "acceptedOutputModes": ["application/json"]
        }
      },
      "id": "550e8400-e29b-41d4-a716-446655440024"
    }

  output_format: |
    JSON-RPC 2.0 result with task status, history, and artifacts containing markdown recommendations.

    Task Submission Response:
    {
      "jsonrpc": "2.0",
      "id": "550e8400-e29b-41d4-a716-446655440024",
      "result": {
        "id": "550e8400-e29b-41d4-a716-446655440078",
        "context_id": "550e8400-e29b-41d4-a716-446655440038",
        "kind": "task",
        "status": {
          "state": "submitted",
          "timestamp": "2026-02-26T05:57:54.684589+00:00"
        },
        "history": [...]
      }
    }

    Task Completion Response (via tasks/get):
    {
      "jsonrpc": "2.0",
      "id": "550e8400-e29b-41d4-a716-446655440014",
      "result": {
        "id": "550e8400-e29b-41d4-a716-446655440078",
        "status": {
          "state": "completed",
          "timestamp": "2026-02-26T05:58:07.302860+00:00"
        },
        "history": [
          {
            "role": "user",
            "parts": [{"kind": "text", "text": "Suggest Recent Movies movies similar to Inception"}]
          },
          {
            "role": "assistant",
            "parts": [{"kind": "text", "text": "# üé¨ Movie Recommendations...\n\n## üéØ Based on your preferences..."}]
          }
        ],
        "artifacts": [
          {
            "artifact_id": "8bfe0735-1408-4f08-926a-0fe1519a5085",
            "name": "result",
            "parts": [{"kind": "text", "text": "Structured markdown with tables, ratings, and metadata"}]
          }
        ]
      }
    }

  error_handling:
    - "Missing OPENROUTER_API_KEY: Raises APIKeyError with setup instructions"
    - "Missing EXA_API_KEY: Raises APIKeyError with Exa.ai signup link"
    - "Exa API unavailable: Agent acknowledges issue and provides recommendations from existing knowledge"
    - "No matches found: Suggests broader criteria or popular alternatives"
    - "Vague queries: Provides genre samplers or asks for clarification"

  examples:
    - title: "Similar Movie Recommendations"
      input:
        parts:
          - kind: "text"
            text: "Suggest Recent Movies movies similar to Inception"
      output:
        text: |
          # üé¨ Movie Recommendations for Movies Similar to "Inception"

          ## üéØ Based on your preferences for: Mind-bending, Sci-fi Thrillers

          ### üèÜ Top Recommendations

          | Movie | Year | Rating | Genre | Runtime | Why You Might Like It |
          |-------|------|--------|-------|---------|----------------------|
          | **Tenet** | 2020 | ‚≠ê 7.3/10 IMDB | üé¨ Sci-Fi, üîÑ Action | 2h 30m | Directed by Christopher Nolan, explores time inversion... |
          | **Palm Springs** | 2020 | üçÖ 94% RT | ‚ôªÔ∏è Sci-Fi, ü§£ Comedy | 1h 30m | Fresh take on time-loop concept... |

          ## üéûÔ∏è Detailed Recommendations

          ### 1. **Tenet** (2020)
          **‚≠ê Rating**: 7.3/10 IMDB
          **ÔøΩ Genre**: Sci-Fi, Action
          **‚è±Ô∏è Runtime**: 2h 30m
          **üéûÔ∏è Director**: Christopher Nolan
          **üåü Starring**: John David Washington, Robert Pattinson
          **üéüÔ∏è Rating**: PG-13
          **üåê Language**: English, USA

          **üìñ Synopsis**: A secret agent embarks on a time-twisting mission...

          **üí° Why this matches your request**: Shares Nolan's signature complex narrative...

          ---
          *Recommendations curated by PopcornPal üé•*
          *Last updated: 2026-02-26*

    - title: "Family-Friendly Recommendations"
      input:
        parts:
          - kind: "text"
            text: "Recommend family-friendly adventure films with high ratings for a family outing"
      output:
        text: |
          # üé¨ Movie Recommendations for Family-Friendly Adventure Films

          ### üèÜ Top Recommendations

          | Movie | Year | Rating | Genre | Runtime | Why You Might Like It |
          |-------|------|--------|-------|---------|-----------------------|
          | **Spider-Man: Into the Spider-Verse** | 2018 | ‚≠ê 8.4/10 IMDB | ÔøΩÔ∏è Adventure, üìΩÔ∏è Animation | 1h 57m | Visually stunning and action-packed... |
          | **Paddington 2** | 2017 | üçÖ 99% RT | üß∏ Adventure, ü§£ Comedy | 1h 44m | Heartfelt story with laughs... |

          ## üí° Tips for Your Movie Night
          - Consider themed dinner inspired by the film
          - Pair with cozy blankets for family experience

  best_practices:
    for_developers:
      - "Use async/await pattern: await initialize_agent() and await handler(messages)"
      - "Set required environment variables: OPENROUTER_API_KEY, EXA_API_KEY"
      - "Optional: Set MEM0_API_KEY for conversation memory"
      - "Configure MODEL_NAME (default: openai/gpt-4o)"
      - "Agent uses lazy initialization with _init_lock for thread safety"

    for_orchestrators:
      - "Route movie/film recommendation queries to this skill"
      - "Submit tasks via message/send JSON-RPC method"
      - "Poll task status via tasks/get method"
      - "Expect 10-30 second processing time per request"
      - "Monitor for APIKeyError on missing credentials"
      - "Task states: submitted ‚Üí completed (or failed)"

  installation: |
    1. Install dependencies:
       uv sync

    2. Set environment variables (.env file or export):
       OPENROUTER_API_KEY=<your-key>  # Required - get from https://openrouter.ai/keys
       EXA_API_KEY=<your-key>          # Required - get from https://exa.ai
       MEM0_API_KEY=<your-key>         # Optional - for conversation memory
       MODEL_NAME=openai/gpt-4o        # Optional - default is openai/gpt-4o

    3. Run agent server:
       uv run python -m movie_recommender_agent
       # Or with CLI args:
       uv run python -m movie_recommender_agent --openrouter-api-key <key> --exa-api-key <key>

    4. Server starts at http://127.0.0.1:3773 by default
       Configuration in agent_config.json

  versioning:
    - version: "1.0.0"
      date: "2026-01-11"
      changes: "Initial release with ExaTools search, OpenRouter LLM, optional Mem0 memory, structured markdown output"
    - version: "2.0.0"
      status: "planned"
      changes: "Not supported by code - no advanced features implemented yet"

# Assessment fields for skill negotiation
assessment:
  keywords:
    - "movie"
    - "film"
    - "recommend"
    - "recommendation"
    - "genre"
    - "rating"

  specializations:
    - domain: "movie-recommendation"
      confidence_boost: 0.9
    - domain: "content-curation"
      confidence_boost: 0.1

  anti_patterns:
    - "download movie free"
    - "pirate movie"
    - "illegal streaming"
    - "movie script writing"
    - "film production"

  complexity_indicators:
    simple:
      - "recommend movies like single title"
      - "top rated genre movies"
      - "recent genre releases"
    medium:
      - "movies similar to multiple titles"
      - "genre movies with specific criteria"
      - "international movies in language"
    complex:
      - "movies combining multiple genres/themes"
      - "director/actor filmography analysis"
      - "cinematic movement recommendations"
